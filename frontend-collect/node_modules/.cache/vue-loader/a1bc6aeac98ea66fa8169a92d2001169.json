{"remainingRequest":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\center.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\center.vue","mtime":1648202568374},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOWQhOenjeagoemqjOaWueazlQppbXBvcnQge2lzRW1haWwsIGlzTW9iaWxlfSBmcm9tICJAL3V0aWxzL3ZhbGlkYXRlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcnVsZUZvcm06IHsKICAgICAgICAgICAgICBuaWNrbmFtZToiIiwKICAgICAgICAgICAgICB1c2VybmFtZToiIiwKICAgICAgICAgICAgICBwaG9uZU51bWJlcjoiIiwKICAgICAgICAgICAgICBlbWFpbDoiIiwKICAgICAgICAgICAgICBjb21wYW55TmFtZToiIgogICAgICAgICAgICB9LAogICAgICAgICAgICB1c2VyVHlwZToiIgogICAgICAgIH07CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB2YXIgdXNlclR5cGUgPSB0aGlzLiRzdG9yYWdlLmdldCgidXNlclR5cGUiKTsKICAgICAgICB0aGlzLnVzZXJUeXBlID0gdXNlclR5cGU7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uSGFuZGxlcigpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnJ1bGVGb3JtLm5pY2tuYW1lKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmmLXnp7DkuI3og73kuLrnqbonKTsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghdGhpcy5ydWxlRm9ybS51c2VybmFtZSkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign55So5oi35ZCN5LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCF0aGlzLnJ1bGVGb3JtLnBob25lTnVtYmVyKSB8fCAoIWlzTW9iaWxlKHRoaXMucnVsZUZvcm0ucGhvbmVOdW1iZXIpKSkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5omL5py65Y+35qC85byP5LiN5q2j56GuYCk7CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCF0aGlzLnJ1bGVGb3JtLmVtYWlsKSB8fCAoIWlzRW1haWwodGhpcy5ydWxlRm9ybS5lbWFpbCkpKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDpgq7nrrHmoLzlvI/kuI3mraPnoa5gKTsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgodGhpcy51c2VyVHlwZT09ImVtcGxveWVyIikmJiF0aGlzLnJ1bGVGb3JtLmNvbXBhbnlOYW1lKXsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDkvIHkuJrlkI3np7DkuI3og73kuLrnqbpgKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJ1bGVGb3JtKTsKICAgICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgICAgICB1cmw6IGAvdXNlci91cGRhdGV1c2VyP3VpZD0ke3RoaXMuJHN0b3JhZ2UuZ2V0KCJ1aWQiKX1gLAogICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLnJ1bGVGb3JtCiAgICAgICAgICAgIH0pLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnkv6Hmga/miJDlip8iLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwLAogICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["center.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"center.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <el-form\r\n                class=\"detail-form-content\"\r\n                ref=\"ruleForm\"\r\n                :model=\"ruleForm\"\r\n                label-width=\"80px\"\r\n        >\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"昵称\" prop=\"nickname\">\r\n                    <el-input v-model=\"ruleForm.nickname\"\r\n                              placeholder=\"昵称\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input v-model=\"ruleForm.username\"\r\n                              placeholder=\"用户名\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"手机号\" prop=\"phoneNumber\">\r\n                    <el-input v-model=\"ruleForm.phoneNumber\"\r\n                              placeholder=\"手机号\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input v-model=\"ruleForm.email\"\r\n                              placeholder=\"邮箱\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item v-if=\"userType=='employer'\" label=\"企业名称\" prop=\"companyName\">\r\n                    <el-input v-model=\"ruleForm.companyName\"\r\n                              placeholder=\"企业名称\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"24\">\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"onHandler\">修 改</el-button>\r\n                </el-form-item>\r\n            </el-col>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n    // 各种校验方法\r\n    import {isEmail, isMobile} from \"@/utils/validate\";\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                ruleForm: {\r\n                  nickname:\"\",\r\n                  username:\"\",\r\n                  phoneNumber:\"\",\r\n                  email:\"\",\r\n                  companyName:\"\"\r\n                },\r\n                userType:\"\"\r\n            };\r\n        },\r\n        mounted() {\r\n            var userType = this.$storage.get(\"userType\");\r\n            this.userType = userType;\r\n        },\r\n        methods: {\r\n            onHandler() {\r\n                if (!this.ruleForm.nickname) {\r\n                    this.$message.error('昵称不能为空');\r\n                    return\r\n                }\r\n                if (!this.ruleForm.username) {\r\n                    this.$message.error('用户名不能为空');\r\n                    return\r\n                }\r\n                if ((!this.ruleForm.phoneNumber) || (!isMobile(this.ruleForm.phoneNumber))) {\r\n                    this.$message.error(`手机号格式不正确`);\r\n                    return\r\n                }\r\n                if ((!this.ruleForm.email) || (!isEmail(this.ruleForm.email))) {\r\n                    this.$message.error(`邮箱格式不正确`);\r\n                    return\r\n                }\r\n                if ((this.userType==\"employer\")&&!this.ruleForm.companyName){\r\n                  this.$message.error(`企业名称不能为空`)\r\n                  return;\r\n                }\r\n                console.log(this.ruleForm);\r\n                this.$http({\r\n                    url: `/user/updateuser?uid=${this.$storage.get(\"uid\")}`,\r\n                    method: \"post\",\r\n                    data: this.ruleForm\r\n                }).then(({data}) => {\r\n                    if (data && data.code === 0) {\r\n                        this.$message({\r\n                            message: \"修改信息成功\",\r\n                            type: \"success\",\r\n                            duration: 1500,\r\n                            onClose: () => {\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"]}]}