{"remainingRequest":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\modules\\report\\relations.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\modules\\report\\relations.vue","mtime":1648306168991},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUmVsYXRpb25HcmFwaCBmcm9tICdyZWxhdGlvbi1ncmFwaCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBSZWxhdGlvbkdyYXBoIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVpZDonJywNCiAgICAgIG1pZDonJywNCiAgICAgIGZpZDonJywNCg0KICAgICAgcmVwb3J0czpbXSwNCg0KDQogICAgICBncmFwaF9qc29uX2RhdGE6IHsNCiAgICAgICAgcm9vdElkOiAnMCcsDQogICAgICAgIG5vZGVzOiBbDQogICAgICAgICAgeyBpZDogJzAnLCB0ZXh0OiAnJywgYm9yZGVyQ29sb3I6ICd5ZWxsb3cnLCBmb250Q29sb3I6ICd3aGl0ZSd9LA0KICAgICAgICBdLA0KICAgICAgICBsaW5rczogWw0KICAgICAgICBdDQogICAgICB9LA0KICAgICAgZ3JhcGhPcHRpb25zOiB7DQogICAgICAgIGRlZmF1bHROb2RlQm9yZGVyV2lkdGg6IDAsDQogICAgICAgIGFsbG93U3dpdGNoTGluZVNoYXBlOiB0cnVlLA0KICAgICAgICBhbGxvd1N3aXRjaEp1bmN0aW9uUG9pbnQ6IHRydWUsDQogICAgICAgIGRlZmF1bHRMaW5lU2hhcGU6IDEsDQogICAgICAgICdsYXlvdXRzJzogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgICdsYWJlbCc6ICfoh6rliqjluIPlsYAnLA0KICAgICAgICAgICAgJ2xheW91dE5hbWUnOiAnZm9yY2UnLA0KICAgICAgICAgICAgJ2xheW91dENsYXNzTmFtZSc6ICdzZWVrcy1sYXlvdXQtZm9yY2UnDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBkZWZhdWx0SnVuY3Rpb25Qb2ludDogJ2JvcmRlcicNCiAgICAgICAgLy8g6L+Z6YeM5Y+v5Lul5Y+C6ICDIkdyYXBoIOWbvuiwsSLkuK3nmoTlj4LmlbDov5vooYzorr7nva4NCiAgICAgIH0sDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMudWlkPXRoaXMuJHJvdXRlLnF1ZXJ5LnVpZA0KICAgIHRoaXMubWlkPXRoaXMuJHJvdXRlLnF1ZXJ5Lm1pZA0KICAgIHRoaXMuZmlkPXRoaXMuJHJvdXRlLnF1ZXJ5LmZpZA0KICAgIHRoaXMuaW5pdCgpDQogICAgY29uc29sZS5sb2codGhpcy50aXRsZSkNCg0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYmFjaygpew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOicvcmVwb3J0L2RldGFpbCcsDQogICAgICAgIHF1ZXJ5OnsNCiAgICAgICAgICBtaWQ6dGhpcy5taWQsDQogICAgICAgICAgdWlkOnRoaXMudWlkDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBzbGVlcChudW1iZXJNaWxsaXMpIHsNCiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgdmFyIGV4aXRUaW1lID0gbm93LmdldFRpbWUoKSArIG51bWJlck1pbGxpczsNCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb24NCiAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgIG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgIGlmIChub3cuZ2V0VGltZSgpID4gZXhpdFRpbWUpDQogICAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0sDQogICAgaW5pdCgpew0KICAgICAgdGhpcy4kaHR0cCh7DQogICAgICAgIHVybDogYGZldGNobWlzc2lvbi9zZWFyY2hyZXBvcnRieWlkcz91aWQ9JHt0aGlzLnVpZH0mbWlkPSR7dGhpcy5taWR9YCwNCiAgICAgICAgbWV0aG9kOiAiZ2V0Ig0KICAgICAgfSkudGhlbigoe2RhdGF9KSA9PiB7DQogICAgICAgIHRoaXMuZ3JhcGhfanNvbl9kYXRhLm5vZGVzWzBdLnRleHQ9ZGF0YS50aXRsZQ0KICAgICAgICB0aGlzLiRodHRwKHsNCiAgICAgICAgICB1cmw6IGByZXBvcnQvZ2V0cmVwb3J0bGlzdD9maWQ9JHt0aGlzLmZpZH1gLA0KICAgICAgICAgIG1ldGhvZDogImdldCINCiAgICAgICAgfSkudGhlbigoe2RhdGF9KSA9PiB7DQogICAgICAgICAgdGhpcy5yZXBvcnRzPWRhdGEuZGF0YQ0KICAgICAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5yZXBvcnRzLmxlbmd0aDtpKyspew0KICAgICAgICAgICAgbGV0IG5vZGU9e2lkOiB0aGlzLnJlcG9ydHNbaV0ucmlkLnRvU3RyaW5nKCksIHRleHQ6IHRoaXMucmVwb3J0c1tpXS50aXRsZSwgY29sb3I6ICcjNDNhMmYxJywgZm9udENvbG9yOiAneWVsbG93JyB9DQogICAgICAgICAgICBsZXQgbGluaz17ZnJvbTogdGhpcy5yZXBvcnRzW2ldLnJpZC50b1N0cmluZygpLCB0bzogJzAnLCB0ZXh0OiAn6KGl5YWF5Y2P5L2cJywgY29sb3I6ICcjNDNhMmYxJ30NCiAgICAgICAgICAgIHRoaXMuZ3JhcGhfanNvbl9kYXRhLm5vZGVzLnB1c2gobm9kZSkNCiAgICAgICAgICAgIHRoaXMuZ3JhcGhfanNvbl9kYXRhLmxpbmtzLnB1c2gobGluaykNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5zaG93U2Vla3NHcmFwaCgpDQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBzaG93U2Vla3NHcmFwaChxdWVyeSkgew0KICAgICAgY29uc29sZS5sb2codGhpcy5ncmFwaF9qc29uX2RhdGEpDQogICAgICAvLyDku6XkuIrmlbDmja7kuK3nmoRub2Rl5ZKMbGlua+WPr+S7peWPguiAgyJOb2Rl6IqC54K5IuWSjCJMaW5r5YWz57O7IuS4reeahOWPguaVsOi/m+ihjOmFjee9rg0KICAgICAgdGhpcy4kcmVmcy5zZWVrc1JlbGF0aW9uR3JhcGguc2V0SnNvbkRhdGEodGhpcy5ncmFwaF9qc29uX2RhdGEsIChzZWVrc1JHR3JhcGgpID0+IHsNCiAgICAgICAgLy8gQ2FsbGVkIHdoZW4gdGhlIHJlbGF0aW9uLWdyYXBoIGlzIGNvbXBsZXRlZA0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uTm9kZUNsaWNrKG5vZGVPYmplY3QsICRldmVudCkgew0KICAgICAgaWYobm9kZU9iamVjdC5pZD09PTApew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKCdvbk5vZGVDbGljazonLCBub2RlT2JqZWN0LmlkKQ0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOicvcmVwb3J0L2RldGFpbCcsDQogICAgICAgIHF1ZXJ5OnsNCiAgICAgICAgICByaWQ6bm9kZU9iamVjdC5pZA0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgb25MaW5lQ2xpY2sobGluZU9iamVjdCwgJGV2ZW50KSB7DQogICAgICBjb25zb2xlLmxvZygnb25MaW5lQ2xpY2s6JywgbGluZU9iamVjdC5pZCkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["relations.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"relations.vue","sourceRoot":"src/views/modules/report","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"background-color: white\">\r\n      <el-button style=\"margin-left: 3em\" @click=\"back()\">\r\n        返回\r\n      </el-button>\r\n    </div>\r\n    <div style=\"height:calc(100vh - 100px);\">\r\n      <RelationGraph ref=\"seeksRelationGraph\" :options=\"graphOptions\" :on-node-click=\"onNodeClick\" :on-line-click=\"onLineClick\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RelationGraph from 'relation-graph'\r\nexport default {\r\n  components: { RelationGraph },\r\n  data() {\r\n    return {\r\n      uid:'',\r\n      mid:'',\r\n      fid:'',\r\n\r\n      reports:[],\r\n\r\n\r\n      graph_json_data: {\r\n        rootId: '0',\r\n        nodes: [\r\n          { id: '0', text: '', borderColor: 'yellow', fontColor: 'white'},\r\n        ],\r\n        links: [\r\n        ]\r\n      },\r\n      graphOptions: {\r\n        defaultNodeBorderWidth: 0,\r\n        allowSwitchLineShape: true,\r\n        allowSwitchJunctionPoint: true,\r\n        defaultLineShape: 1,\r\n        'layouts': [\r\n          {\r\n            'label': '自动布局',\r\n            'layoutName': 'force',\r\n            'layoutClassName': 'seeks-layout-force'\r\n          }\r\n        ],\r\n        defaultJunctionPoint: 'border'\r\n        // 这里可以参考\"Graph 图谱\"中的参数进行设置\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.uid=this.$route.query.uid\r\n    this.mid=this.$route.query.mid\r\n    this.fid=this.$route.query.fid\r\n    this.init()\r\n    console.log(this.title)\r\n\r\n  },\r\n  methods: {\r\n    back(){\r\n      this.$router.push({\r\n        path:'/report/detail',\r\n        query:{\r\n          mid:this.mid,\r\n          uid:this.uid\r\n        }\r\n      })\r\n    },\r\n    sleep(numberMillis) {\r\n      var now = new Date();\r\n      var exitTime = now.getTime() + numberMillis;\r\n      // eslint-disable-next-line no-constant-condition\r\n      while (true) {\r\n        now = new Date();\r\n        if (now.getTime() > exitTime)\r\n          return;\r\n      }\r\n    },\r\n    init(){\r\n      this.$http({\r\n        url: `fetchmission/searchreportbyids?uid=${this.uid}&mid=${this.mid}`,\r\n        method: \"get\"\r\n      }).then(({data}) => {\r\n        this.graph_json_data.nodes[0].text=data.title\r\n        this.$http({\r\n          url: `report/getreportlist?fid=${this.fid}`,\r\n          method: \"get\"\r\n        }).then(({data}) => {\r\n          this.reports=data.data\r\n          for(let i=0;i<this.reports.length;i++){\r\n            let node={id: this.reports[i].rid.toString(), text: this.reports[i].title, color: '#43a2f1', fontColor: 'yellow' }\r\n            let link={from: this.reports[i].rid.toString(), to: '0', text: '补充协作', color: '#43a2f1'}\r\n            this.graph_json_data.nodes.push(node)\r\n            this.graph_json_data.links.push(link)\r\n          }\r\n          this.showSeeksGraph()\r\n        });\r\n      });\r\n    },\r\n    showSeeksGraph(query) {\r\n      console.log(this.graph_json_data)\r\n      // 以上数据中的node和link可以参考\"Node节点\"和\"Link关系\"中的参数进行配置\r\n      this.$refs.seeksRelationGraph.setJsonData(this.graph_json_data, (seeksRGGraph) => {\r\n        // Called when the relation-graph is completed\r\n      })\r\n    },\r\n    onNodeClick(nodeObject, $event) {\r\n      if(nodeObject.id===0){\r\n        return\r\n      }\r\n      console.log('onNodeClick:', nodeObject.id)\r\n      this.$router.push({\r\n        path:'/report/detail',\r\n        query:{\r\n          rid:nodeObject.id\r\n        }\r\n      })\r\n    },\r\n    onLineClick(lineObject, $event) {\r\n      console.log('onLineClick:', lineObject.id)\r\n    }\r\n  }\r\n}\r\n</script>"]}]}