{"remainingRequest":"D:\\软工三防爆\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\软工三防爆\\frontend-collect\\src\\views\\update-password.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\软工三防爆\\frontend-collect\\src\\views\\update-password.vue","mtime":1681194484799},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670320086114},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":1670320081695},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670320086114},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":1670320130043}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHJ1bGVGb3JtOiB7fSwNCiAgICAgIHVzZXI6IHt9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgcGFzc3dvcmQ6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlr4bnoIHkuI3og73kuLrnqboiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIG5ld1Bhc3N3b3JkOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAi5paw5a+G56CB5LiN6IO95Li656m6IiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICByZVBhc3N3b3JkOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAi56Gu6K6k5a+G56CB5LiN6IO95Li656m6IiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiDQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgbW91bnRlZCgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgb25Mb2dvdXQoKSB7DQogICAgICB0aGlzLiRzdG9yYWdlLnJlbW92ZSgiVG9rZW4iKTsNCiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgbmFtZTogImxvZ2luIiB9KTsNCiAgICB9LA0KICAgIC8vIOS/ruaUueWvhueggQ0KICAgIG9uSGFuZGxlcigpIHsNCiAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5ydWxlRm9ybS5uZXdQYXNzd29yZCAhPSB0aGlzLnJ1bGVGb3JtLnJlUGFzc3dvcmQpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4pOasoeWvhueggei+k+WFpeS4jeS4gOiHtCIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJ1bGVGb3JtLm9sZFBhc3N3b3JkKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJ1bGVGb3JtLm5ld1Bhc3N3b3JkKTsNCiAgICAgICAgICB2YXIgdWlkPXRoaXMuJHN0b3JhZ2UuZ2V0KCJ1aWQiKTsNCiAgICAgICAgICB0aGlzLiRodHRwKHsNCiAgICAgICAgICAgIHVybDogYC91c2VyL3VwZGF0ZXBhc3N3b3JkP3VpZD0ke3RoaXMuJHN0b3JhZ2UuZ2V0KCJ1aWQiKX1gLA0KICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsDQogICAgICAgICAgICBkYXRhOnsNCiAgICAgICAgICAgICAgb2xkUGFzc3dvcmQ6dGhpcy5ydWxlRm9ybS5vbGRQYXNzd29yZCwNCiAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6dGhpcy5ydWxlRm9ybS5uZXdQYXNzd29yZA0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pLnRoZW4oKHsgZGF0YSB9KSA9PiB7DQogICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT09IDApIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueWvhueggeaIkOWKnyzkuIvmrKHnmbvlvZXns7vnu5/nlJ/mlYgiLA0KICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwNCiAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGJhY2tUb0luZGV4KCl7DQogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7cGF0aDogIi9pbmRleC8ifSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["update-password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"update-password.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <img class=\"bg\" src=\"@/assets/img/background.jpg\">\r\n    <el-form\r\n\r\n      class=\"login-form\"\r\n      ref=\"ruleForm\"\r\n      :rules=\"rules\"\r\n      :model=\"ruleForm\"\r\n      label-width=\"80px\"\r\n      style=\"margin-top: 100px; background: aliceblue\"\r\n    >\r\n\r\n      <!--      class=\"detail-form-content\"-->\r\n      <el-form-item label=\"原密码\" prop=\"oldPassword\" style=\"margin-top: 30px; margin-right: 10px\">\r\n        <el-input v-model=\"ruleForm.oldPassword\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"新密码\" prop=\"newPassword\" style=\"margin-right: 10px\">\r\n        <el-input v-model=\"ruleForm.newPassword\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"确认密码\" prop=\"rePassword\" style=\"margin-right: 10px\">\r\n        <el-input v-model=\"ruleForm.rePassword\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\"\r\n                   style=\"\r\n                      margin-left: 28px;\r\n                      margin-bottom: 1.5px\"\r\n                   @click=\"onHandler\" >确 定</el-button>\r\n        <el-button  type=\"warning\"\r\n                    style=\"\r\n                      margin-left: 66px;\r\n                      margin-bottom: 1.5px\"\r\n                   @click=\"backToIndex\" >返 回</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      ruleForm: {},\r\n      user: {},\r\n      rules: {\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: \"密码不能为空\",\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        newPassword: [\r\n          {\r\n            required: true,\r\n            message: \"新密码不能为空\",\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        rePassword: [\r\n          {\r\n            required: true,\r\n            message: \"确认密码不能为空\",\r\n            trigger: \"change\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    onLogout() {\r\n      this.$storage.remove(\"Token\");\r\n      this.$router.replace({ name: \"login\" });\r\n    },\r\n    // 修改密码\r\n    onHandler() {\r\n      this.$refs[\"ruleForm\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.ruleForm.newPassword != this.ruleForm.rePassword) {\r\n            this.$message.error(\"两次密码输入不一致\");\r\n            return;\r\n          }\r\n          console.log(this.ruleForm.oldPassword);\r\n          console.log(this.ruleForm.newPassword);\r\n          var uid=this.$storage.get(\"uid\");\r\n          this.$http({\r\n            url: `/user/updatepassword?uid=${this.$storage.get(\"uid\")}`,\r\n            method: \"post\",\r\n            data:{\r\n              oldPassword:this.ruleForm.oldPassword,\r\n              newPassword:this.ruleForm.newPassword\r\n            }\r\n          }).then(({ data }) => {\r\n            if (data && data.code === 0) {\r\n              this.$message({\r\n                message: \"修改密码成功,下次登录系统生效\",\r\n                type: \"success\",\r\n                duration: 1500,\r\n                onClose: () => {\r\n                }\r\n              });\r\n            } else {\r\n              this.$message.error(data.msg);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    backToIndex(){\r\n      this.$router.replace({path: \"/index/\"});\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</>\r\n"]}]}