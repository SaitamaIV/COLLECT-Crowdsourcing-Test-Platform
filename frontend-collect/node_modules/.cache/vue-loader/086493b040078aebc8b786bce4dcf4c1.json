{"remainingRequest":"D:\\软工三防爆\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\软工三防爆\\frontend-collect\\src\\views\\center.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\软工三防爆\\frontend-collect\\src\\views\\center.vue","mtime":1670320133536},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670320086114},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":1670320081695},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670320086114},{"path":"D:\\软工三防爆\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":1670320130043}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOWQhOenjeagoemqjOaWueazlQppbXBvcnQge2lzRW1haWwsIGlzTW9iaWxlfSBmcm9tICJAL3V0aWxzL3ZhbGlkYXRlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcnVsZUZvcm06IHsKICAgICAgICAgICAgICBuaWNrbmFtZToiIiwKICAgICAgICAgICAgICBwaG9uZU51bWJlcjoiIiwKICAgICAgICAgICAgICBlbWFpbDoiIiwKICAgICAgICAgICAgICBjb21wYW55TmFtZToiIiwKICAgICAgICAgICAgICBkZXZpY2VzOltdLAogICAgICAgICAgICAgIGxhYmVsczpbXQogICAgICAgICAgICB9LAogICAgICAgICAgICB1c2VyVHlwZToiIgogICAgICAgIH07CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB2YXIgdXNlclR5cGUgPSB0aGlzLiRzdG9yYWdlLmdldCgidXNlclR5cGUiKTsKICAgICAgICB0aGlzLnVzZXJUeXBlID0gdXNlclR5cGU7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIG9uSGFuZGxlcigpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnJ1bGVGb3JtLm5pY2tuYW1lKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmmLXnp7DkuI3og73kuLrnqbonKTsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoIXRoaXMucnVsZUZvcm0ucGhvbmVOdW1iZXIpIHx8ICghaXNNb2JpbGUodGhpcy5ydWxlRm9ybS5waG9uZU51bWJlcikpKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDmiYvmnLrlj7fmoLzlvI/kuI3mraPnoa5gKTsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoIXRoaXMucnVsZUZvcm0uZW1haWwpIHx8ICghaXNFbWFpbCh0aGlzLnJ1bGVGb3JtLmVtYWlsKSkpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOmCrueuseagvOW8j+S4jeato+ehrmApOwogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCh0aGlzLnVzZXJUeXBlPT0iZW1wbG95ZXIiKSYmIXRoaXMucnVsZUZvcm0uY29tcGFueU5hbWUpewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOS8geS4muWQjeensOS4jeiDveS4uuepumApCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLnJ1bGVGb3JtLmxhYmVscy5sZW5ndGg9PT0wKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5Lu75Yqh5YGP5aW977yBJyk7CiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMucnVsZUZvcm0uZGV2aWNlcy5sZW5ndGg9PT0wKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5rWL6K+V6K6+5aSH77yBJyk7CiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5ydWxlRm9ybSk7CiAgICAgICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgICAgICAgdXJsOiBgL3VzZXIvdXBkYXRldXNlcj91aWQ9JHt0aGlzLiRzdG9yYWdlLmdldCgidWlkIil9YCwKICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgZGF0YTogdGhpcy5ydWxlRm9ybQogICAgICAgICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55L+h5oGv5oiQ5YqfIiwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["center.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"center.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <el-form\r\n                class=\"detail-form-content\"\r\n                ref=\"ruleForm\"\r\n                :model=\"ruleForm\"\r\n                label-width=\"80px\"\r\n        >\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"昵称\" prop=\"nickname\">\r\n                    <el-input v-model=\"ruleForm.nickname\"\r\n                              placeholder=\"昵称\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"手机号\" prop=\"phoneNumber\">\r\n                    <el-input v-model=\"ruleForm.phoneNumber\"\r\n                              placeholder=\"手机号\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input v-model=\"ruleForm.email\"\r\n                              placeholder=\"邮箱\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item v-if=\"userType=='employer'\" label=\"企业名称\" prop=\"companyName\">\r\n                    <el-input v-model=\"ruleForm.companyName\"\r\n                              placeholder=\"企业名称\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col>\r\n              <el-form-item v-if=\"userType=='employee'\" label=\"测试设备\" prop=\"devices\">\r\n                <el-checkbox-group v-model=\"ruleForm.devices\">\r\n                  <el-checkbox label=\"嵌入式设备\" name=\"type\" />\r\n                  <el-checkbox label=\"笔记本电脑\" name=\"type\" />\r\n                  <el-checkbox label=\"台式机\" name=\"type\" />\r\n                  <el-checkbox label=\"手机\" name=\"type\" />\r\n                  <el-checkbox label=\"其他设备\" name=\"type\" />\r\n                </el-checkbox-group>\r\n              </el-form-item>\r\n              <el-form-item v-if=\"userType=='employee'\" label=\"任务偏好\" prop=\"labels\">\r\n                <el-checkbox-group v-model=\"ruleForm.labels\">\r\n                  <el-checkbox label=\"蜕变测试\" name=\"type\" />\r\n                  <el-checkbox label=\"差分测试\" name=\"type\" />\r\n                  <el-checkbox label=\"模糊测试\" name=\"type\" />\r\n                  <el-checkbox label=\"压力测试\" name=\"type\" />\r\n                  <el-checkbox label=\"单元测试\" name=\"type\" />\r\n                  <el-checkbox label=\"黑盒测试\" name=\"type\" />\r\n                  <el-checkbox label=\"白盒测试\" name=\"type\" />\r\n                  <el-checkbox label=\"灰盒测试\" name=\"type\" />\r\n                  <el-checkbox label=\"变异测试\" name=\"type\" />\r\n                  <el-checkbox label=\"功能测试\" name=\"type\" />\r\n                  <el-checkbox label=\"非功能测试\" name=\"type\" />\r\n                  <el-checkbox label=\"集成测试\" name=\"type\" />\r\n                  <el-checkbox label=\"其他测试\" name=\"type\" />\r\n                  <el-checkbox label=\"动态测试\" name=\"type\" />\r\n                  <el-checkbox label=\"静态测试\" name=\"type\" />\r\n                  <el-checkbox label=\"接口测试\" name=\"type\" />\r\n                </el-checkbox-group>\r\n              </el-form-item>\r\n            </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"onHandler\">修 改</el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n    // 各种校验方法\r\n    import {isEmail, isMobile} from \"@/utils/validate\";\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                ruleForm: {\r\n                  nickname:\"\",\r\n                  phoneNumber:\"\",\r\n                  email:\"\",\r\n                  companyName:\"\",\r\n                  devices:[],\r\n                  labels:[]\r\n                },\r\n                userType:\"\"\r\n            };\r\n        },\r\n        mounted() {\r\n            var userType = this.$storage.get(\"userType\");\r\n            this.userType = userType;\r\n        },\r\n        methods: {\r\n            onHandler() {\r\n                if (!this.ruleForm.nickname) {\r\n                    this.$message.error('昵称不能为空');\r\n                    return\r\n                }\r\n                if ((!this.ruleForm.phoneNumber) || (!isMobile(this.ruleForm.phoneNumber))) {\r\n                    this.$message.error(`手机号格式不正确`);\r\n                    return\r\n                }\r\n                if ((!this.ruleForm.email) || (!isEmail(this.ruleForm.email))) {\r\n                    this.$message.error(`邮箱格式不正确`);\r\n                    return\r\n                }\r\n                if ((this.userType==\"employer\")&&!this.ruleForm.companyName){\r\n                  this.$message.error(`企业名称不能为空`)\r\n                  return;\r\n                }\r\n                if (this.ruleForm.labels.length===0) {\r\n                  this.$message.error('请选择任务偏好！');\r\n                  return\r\n                }\r\n                if (this.ruleForm.devices.length===0) {\r\n                  this.$message.error('请选择测试设备！');\r\n                  return\r\n                }\r\n                console.log(this.ruleForm);\r\n                this.$http({\r\n                    url: `/user/updateuser?uid=${this.$storage.get(\"uid\")}`,\r\n                    method: \"post\",\r\n                    data: this.ruleForm\r\n                }).then(({data}) => {\r\n                    if (data && data.code === 0) {\r\n                        this.$message({\r\n                            message: \"修改信息成功\",\r\n                            type: \"success\",\r\n                            duration: 1500,\r\n                            onClose: () => {\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"]}]}