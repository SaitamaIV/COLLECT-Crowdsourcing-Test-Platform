{"remainingRequest":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\modules\\report\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\modules\\report\\list.vue","mtime":1653408202512},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653401020224},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":1653401017578},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653401020224},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":1653401043277}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZWFyY2hGb3JtOiB7DQogICAgICAgIGtleTogIiINCiAgICAgIH0sDQogICAgICBsb2dpblVpZDonJywNCiAgICAgIG1pZDowLA0KICAgICAgZGF0YUxpc3Q6IFtdLA0KICAgICAgcGFnZUluZGV4OiAxLA0KICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgdG90YWw6IDAsDQogICAgICBkYXRhTGlzdExvYWRpbmc6IGZhbHNlLA0KICAgICAgZGF0YUxpc3RTZWxlY3Rpb25zOiBbXSwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMubWlkPXRoaXMuJHJvdXRlLnF1ZXJ5Lm1pZA0KICAgIHRoaXMudXNlclR5cGU9dGhpcy4kc3RvcmFnZS5nZXQoInVzZXJUeXBlIikNCiAgICB0aGlzLmxvZ2luVWlkPXRoaXMuJHN0b3JhZ2UuZ2V0KCJ1aWQiKQ0KICAgIGNvbnNvbGUubG9nKHRoaXMubG9naW5VaWQpDQogICAgdGhpcy5nZXREYXRhTGlzdCgpOw0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgaHRtbGZpbHRlcjogZnVuY3Rpb24gKHZhbCkgew0KICAgICAgcmV0dXJuIHZhbC5yZXBsYWNlKC88W14+XSo+L2cpLnJlcGxhY2UoL3VuZGVmaW5lZC9nLCAnJyk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgc2VhcmNoQmFkUmVwb3J0cygpIHsNCiAgICAgIHRoaXMuZGF0YUxpc3RMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMubWlkPXRoaXMuJHJvdXRlLnF1ZXJ5Lm1pZDsNCiAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgIHBhZ2VJbmRleDogdGhpcy5wYWdlSW5kZXgsDQogICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLA0KICAgICAgfQ0KICAgICAgdGhpcy4kaHR0cCh7DQogICAgICAgIHVybDogYC9mZXRjaG1pc3Npb24vZ2V0YmFkcmVwb3J0cz9taWQ9JHt0aGlzLm1pZH1gLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBwYXJhbXM6IHBhcmFtcw0KICAgICAgfSkudGhlbigoe2RhdGF9KSA9PiB7DQogICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IGRhdGEubGlzdDsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFMaXN0KTsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gW107DQogICAgICAgICAgdGhpcy50b3RhbCA9IDA7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhTGlzdExvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g6I635Y+W5pWw5o2u5YiX6KGoDQogICAgZ2V0RGF0YUxpc3QoKSB7DQogICAgICB0aGlzLmRhdGFMaXN0TG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLm1pZD10aGlzLiRyb3V0ZS5xdWVyeS5taWQ7DQogICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICBwYWdlSW5kZXg6IHRoaXMucGFnZUluZGV4LA0KICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwNCiAgICAgIH0NCiAgICAgIHRoaXMuJGh0dHAoew0KICAgICAgICB1cmw6IGAvZmV0Y2htaXNzaW9uL3NlYXJjaHJlcG9ydHNieW1pZD9taWQ9JHt0aGlzLm1pZH1gLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBwYXJhbXM6IHBhcmFtcw0KICAgICAgfSkudGhlbigoe2RhdGF9KSA9PiB7DQogICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IGRhdGEubGlzdDsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFMaXN0KTsNCiAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS50b3RhbDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gW107DQogICAgICAgICAgdGhpcy50b3RhbCA9IDA7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5kYXRhTGlzdExvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5q+P6aG15pWwDQogICAgc2l6ZUNoYW5nZUhhbmRsZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7DQogICAgICB0aGlzLnBhZ2VJbmRleCA9IDE7DQogICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgfSwNCiAgICAvLyDlvZPliY3pobUNCiAgICBjdXJyZW50Q2hhbmdlSGFuZGxlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlSW5kZXggPSB2YWw7DQogICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgfSwNCiAgICAvLyDlpJrpgIkNCiAgICBzZWxlY3Rpb25DaGFuZ2VIYW5kbGVyKHZhbCkgew0KICAgICAgdGhpcy5kYXRhTGlzdFNlbGVjdGlvbnMgPSB2YWw7DQogICAgfSwNCiAgICBiYWNrKCl7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6Jy9taXNzaW9uL2RldGFpbCcsDQogICAgICAgIHF1ZXJ5OnsNCiAgICAgICAgICBtaWQ6dGhpcy5taWQsDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDor6bmg4UNCiAgICB3YXRjaFJlcG9ydChmaWQsbWlkKXsNCiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0KCJ3aGljaFRvUmVwb3J0RGV0YWlsIiwgInJlcG9ydExpc3QiKTsNCiAgICAgIGNvbnNvbGUubG9nKGZpZCkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDonL3JlcG9ydC9kZXRhaWwnLA0KICAgICAgICBxdWVyeTp7DQogICAgICAgICAgZmlkOmZpZCwNCiAgICAgICAgICBtaWQ6bWlkDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBjb29wZXJhdGlvblJlcG9ydChmaWQpew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOicvcmVwb3J0L2VkaXQnLA0KICAgICAgICBxdWVyeTp7DQogICAgICAgICAgZmlkOmZpZCwNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/modules/report","sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <!-- 列表页 -->\r\n    <div>\r\n      <div class=\"table-content\">\r\n        <el-form>\r\n          <el-form-item>\r\n            <el-button round @click=\"getDataList()\">全部报告</el-button>\r\n            <el-button round @click=\"searchBadReports()\">查询低质量报告</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-table\r\n            :data=\"dataList\"\r\n            border\r\n            v-loading=\"dataListLoading\"\r\n            @selection-change=\"selectionChangeHandler\"\r\n            style=\"width: 100%;\">\r\n          <el-table-column\r\n              type=\"selection\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              width=\"50\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"title\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              sortable\r\n              label=\"报告主题\">\r\n            <template slot-scope=\"scope\">\r\n              {{scope.row.title}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"bugDescription\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              sortable\r\n              label=\"漏洞描述信息\">\r\n            <template slot-scope=\"scope\">\r\n              {{scope.row.bugDescription}}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n              prop=\"isBad\"\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              sortable\r\n              label=\"是否为低质量报告\">\r\n            <template slot-scope=\"scope\">\r\n              {{scope.row.isBad}}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              header-align=\"center\"\r\n              align=\"center\"\r\n              label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" icon=\"el-icon-edit\" size=\"small\"\r\n                         @click=\"watchReport(scope.row.fid,scope.row.mid)\">详情\r\n              </el-button>\r\n              <el-button v-if=\"scope.row.isBad === 'True' && userType ==='employee' && loginUid != scope.row.uid\" type=\"text\" icon=\"el-icon-edit\" size=\"small\"\r\n                         @click=\"cooperationReport(scope.row.fid)\">协作\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n            @size-change=\"sizeChangeHandle\"\r\n            @current-change=\"currentChangeHandle\"\r\n            :current-page=\"pageIndex\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"pageSize\"\r\n            :total=\"total\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            class=\"pagination-content\"\r\n        ></el-pagination>\r\n        <el-button style=\"margin-left: 1em\" @click=\"back()\">返回</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        key: \"\"\r\n      },\r\n      loginUid:'',\r\n      mid:0,\r\n      dataList: [],\r\n      pageIndex: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      dataListLoading: false,\r\n      dataListSelections: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.mid=this.$route.query.mid\r\n    this.userType=this.$storage.get(\"userType\")\r\n    this.loginUid=this.$storage.get(\"uid\")\r\n    console.log(this.loginUid)\r\n    this.getDataList();\r\n  },\r\n  filters: {\r\n    htmlfilter: function (val) {\r\n      return val.replace(/<[^>]*>/g).replace(/undefined/g, '');\r\n    }\r\n  },\r\n  methods: {\r\n    searchBadReports() {\r\n      this.dataListLoading = true;\r\n      this.mid=this.$route.query.mid;\r\n      let params = {\r\n        pageIndex: this.pageIndex,\r\n        pageSize: this.pageSize,\r\n      }\r\n      this.$http({\r\n        url: `/fetchmission/getbadreports?mid=${this.mid}`,\r\n        method: \"get\",\r\n        params: params\r\n      }).then(({data}) => {\r\n        if (data) {\r\n          this.dataList = data.list;\r\n          console.log(this.dataList);\r\n          this.total = data.total;\r\n        } else {\r\n          this.dataList = [];\r\n          this.total = 0;\r\n        }\r\n        this.dataListLoading = false;\r\n      });\r\n    },\r\n    // 获取数据列表\r\n    getDataList() {\r\n      this.dataListLoading = true;\r\n      this.mid=this.$route.query.mid;\r\n      let params = {\r\n        pageIndex: this.pageIndex,\r\n        pageSize: this.pageSize,\r\n      }\r\n      this.$http({\r\n        url: `/fetchmission/searchreportsbymid?mid=${this.mid}`,\r\n        method: \"get\",\r\n        params: params\r\n      }).then(({data}) => {\r\n        if (data) {\r\n          this.dataList = data.list;\r\n          console.log(this.dataList);\r\n          this.total = data.total;\r\n        } else {\r\n          this.dataList = [];\r\n          this.total = 0;\r\n        }\r\n        this.dataListLoading = false;\r\n      });\r\n    },\r\n    // 每页数\r\n    sizeChangeHandle(val) {\r\n      this.pageSize = val;\r\n      this.pageIndex = 1;\r\n      this.getDataList();\r\n    },\r\n    // 当前页\r\n    currentChangeHandle(val) {\r\n      this.pageIndex = val;\r\n      this.getDataList();\r\n    },\r\n    // 多选\r\n    selectionChangeHandler(val) {\r\n      this.dataListSelections = val;\r\n    },\r\n    back(){\r\n      this.$router.push({\r\n        path:'/mission/detail',\r\n        query:{\r\n          mid:this.mid,\r\n        }\r\n      })\r\n    },\r\n    // 详情\r\n    watchReport(fid,mid){\r\n      this.$storage.set(\"whichToReportDetail\", \"reportList\");\r\n      console.log(fid)\r\n      this.$router.push({\r\n        path:'/report/detail',\r\n        query:{\r\n          fid:fid,\r\n          mid:mid\r\n        }\r\n      })\r\n    },\r\n    cooperationReport(fid){\r\n      this.$router.push({\r\n        path:'/report/edit',\r\n        query:{\r\n          fid:fid,\r\n        }\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"]}]}