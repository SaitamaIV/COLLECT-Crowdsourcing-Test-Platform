{"remainingRequest":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\modules\\report\\similarView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\modules\\report\\similarView.vue","mtime":1653408202515},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\babel.config.js","mtime":1653401012640},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653401020224},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":1653401017578},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653401020224},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":1653401043277}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUmVsYXRpb25HcmFwaCBmcm9tICdyZWxhdGlvbi1ncmFwaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBSZWxhdGlvbkdyYXBoOiBSZWxhdGlvbkdyYXBoCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdWlkOiAnJywKICAgICAgbWlkOiAnJywKICAgICAgZmlkOiAnJywKICAgICAgcmVwb3J0czogW10sCiAgICAgIGdyYXBoX2pzb25fZGF0YTogewogICAgICAgIHJvb3RJZDogJzAnLAogICAgICAgIG5vZGVzOiBbewogICAgICAgICAgaWQ6ICcwJywKICAgICAgICAgIHRleHQ6ICcnLAogICAgICAgICAgYm9yZGVyQ29sb3I6ICd5ZWxsb3cnLAogICAgICAgICAgZm9udENvbG9yOiAnd2hpdGUnCiAgICAgICAgfV0sCiAgICAgICAgbGlua3M6IFtdCiAgICAgIH0sCiAgICAgIGdyYXBoT3B0aW9uczogewogICAgICAgIGRlZmF1bHROb2RlQm9yZGVyV2lkdGg6IDAsCiAgICAgICAgYWxsb3dTd2l0Y2hMaW5lU2hhcGU6IHRydWUsCiAgICAgICAgYWxsb3dTd2l0Y2hKdW5jdGlvblBvaW50OiB0cnVlLAogICAgICAgIGRlZmF1bHRMaW5lU2hhcGU6IDEsCiAgICAgICAgJ2xheW91dHMnOiBbewogICAgICAgICAgJ2xhYmVsJzogJ+iHquWKqOW4g+WxgCcsCiAgICAgICAgICAnbGF5b3V0TmFtZSc6ICdmb3JjZScsCiAgICAgICAgICAnbGF5b3V0Q2xhc3NOYW1lJzogJ3NlZWtzLWxheW91dC1mb3JjZScKICAgICAgICB9XSwKICAgICAgICBkZWZhdWx0SnVuY3Rpb25Qb2ludDogJ2JvcmRlcicgLy8g6L+Z6YeM5Y+v5Lul5Y+C6ICDIkdyYXBoIOWbvuiwsSLkuK3nmoTlj4LmlbDov5vooYzorr7nva4KCiAgICAgIH0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy/kuoznuqfnmoTmiqXlkYror6bmg4Xop6PlhrMKICAgIHRoaXMuJHN0b3JhZ2Uuc2V0KCJ3aGljaFRvUmVwb3J0RGV0YWlsIiwgInJlcG9ydExpc3QiKTsKICAgIHRoaXMubWlkID0gdGhpcy4kcm91dGUucXVlcnkubWlkOwogICAgdGhpcy5maWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5maWQ7CiAgICB0aGlzLmluaXQoKTsKICAgIGNvbnNvbGUubG9nKHRoaXMudGl0bGUpOwogIH0sCiAgbWV0aG9kczogewogICAgYmFjazogZnVuY3Rpb24gYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvcmVwb3J0L2RldGFpbCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGZpZDogdGhpcy5maWQsCiAgICAgICAgICBtaWQ6IHRoaXMubWlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzbGVlcDogZnVuY3Rpb24gc2xlZXAobnVtYmVyTWlsbGlzKSB7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgZXhpdFRpbWUgPSBub3cuZ2V0VGltZSgpICsgbnVtYmVyTWlsbGlzOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uCgogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgaWYgKG5vdy5nZXRUaW1lKCkgPiBleGl0VGltZSkgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogImZldGNobWlzc2lvbi9zZWFyY2hyZXBvcnRieWZpZD9maWQ9Ii5jb25jYXQodGhpcy5maWQpLAogICAgICAgIG1ldGhvZDogImdldCIKICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIF90aGlzLmdyYXBoX2pzb25fZGF0YS5ub2Rlc1swXS50ZXh0ID0gZGF0YS5mZXRjaG1pc3Npb24udGl0bGU7CgogICAgICAgIF90aGlzLiRodHRwKHsKICAgICAgICAgIHVybDogImZldGNobWlzc2lvbi9nZXRzaW1pbGFyaXR5Z3JhcGg/ZmlkPSIuY29uY2F0KF90aGlzLmZpZCksCiAgICAgICAgICBtZXRob2Q6ICJnZXQiCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKICAgICAgICAgIF90aGlzLnJlcG9ydHMgPSBkYXRhOwogICAgICAgICAgY29uc29sZS5sb2coX3RoaXMucmVwb3J0cyk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5yZXBvcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBub2RlID0gewogICAgICAgICAgICAgIGlkOiBfdGhpcy5yZXBvcnRzW2ldLmZpZC50b1N0cmluZygpLAogICAgICAgICAgICAgIHRleHQ6IF90aGlzLnJlcG9ydHNbaV0udGl0bGUsCiAgICAgICAgICAgICAgY29sb3I6ICcjNDNhMmYxJywKICAgICAgICAgICAgICBmb250Q29sb3I6ICd5ZWxsb3cnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBsaW5rID0gewogICAgICAgICAgICAgIGZyb206IF90aGlzLnJlcG9ydHNbaV0uZmlkLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgdG86ICcwJywKICAgICAgICAgICAgICB0ZXh0OiBOdW1iZXIoX3RoaXMucmVwb3J0c1tpXS5zaW1pbGFyaXR5ICogMTAwKS50b0ZpeGVkKCkgKyAiJSIsCiAgICAgICAgICAgICAgY29sb3I6ICcjNDNhMmYxJwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXMuZ3JhcGhfanNvbl9kYXRhLm5vZGVzLnB1c2gobm9kZSk7CgogICAgICAgICAgICBfdGhpcy5ncmFwaF9qc29uX2RhdGEubGlua3MucHVzaChsaW5rKTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5zaG93U2Vla3NHcmFwaCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzaG93U2Vla3NHcmFwaDogZnVuY3Rpb24gc2hvd1NlZWtzR3JhcGgocXVlcnkpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5ncmFwaF9qc29uX2RhdGEpOyAvLyDku6XkuIrmlbDmja7kuK3nmoRub2Rl5ZKMbGlua+WPr+S7peWPguiAgyJOb2Rl6IqC54K5IuWSjCJMaW5r5YWz57O7IuS4reeahOWPguaVsOi/m+ihjOmFjee9rgoKICAgICAgdGhpcy4kcmVmcy5zZWVrc1JlbGF0aW9uR3JhcGguc2V0SnNvbkRhdGEodGhpcy5ncmFwaF9qc29uX2RhdGEsIGZ1bmN0aW9uIChzZWVrc1JHR3JhcGgpIHsvLyBDYWxsZWQgd2hlbiB0aGUgcmVsYXRpb24tZ3JhcGggaXMgY29tcGxldGVkCiAgICAgIH0pOwogICAgfSwKICAgIG9uTm9kZUNsaWNrOiBmdW5jdGlvbiBvbk5vZGVDbGljayhub2RlT2JqZWN0LCAkZXZlbnQpIHsKICAgICAgaWYgKG5vZGVPYmplY3QuaWQgPT09ICcwJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJlcG9ydCA9IHRoaXMucmVwb3J0cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5maWQudG9TdHJpbmcoKSA9PT0gbm9kZU9iamVjdC5pZDsKICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JhZ2Uuc2V0KCJ3aGljaFRvUmVwb3J0RGV0YWlsIiwgInNpbWlsYXJSZXBvcnRWaWV3Iik7IC8vIGNvbnNvbGUubG9nKCdvbk5vZGVDbGljazonLCBub2RlT2JqZWN0LmlkKQogICAgICAvLyBjb25zb2xlLmxvZyhyZXBvcnQpCgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9yZXBvcnQvZGV0YWlsJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgZmlkOiB0aGlzLmZpZCwKICAgICAgICAgIG1pZDogdGhpcy5taWQsCiAgICAgICAgICBzaW1pbGFyRmlkOiBub2RlT2JqZWN0LmlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbkxpbmVDbGljazogZnVuY3Rpb24gb25MaW5lQ2xpY2sobGluZU9iamVjdCwgJGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKCdvbkxpbmVDbGljazonLCBsaW5lT2JqZWN0LmlkKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;AAcA;AACA;AACAA;AAAAC;AAAA,GADA;AAEAC,MAFA,kBAEA;AACA;AACAC,aADA;AAEAC,aAFA;AAGAC,aAHA;AAKAC,iBALA;AAQAC;AACAC,mBADA;AAEAC,gBACA;AAAAC;AAAAC;AAAAC;AAAAC;AAAA,SADA,CAFA;AAKAC;AALA,OARA;AAgBAC;AACAC,iCADA;AAEAC,kCAFA;AAGAC,sCAHA;AAIAC,2BAJA;AAKA,oBACA;AACA,yBADA;AAEA,+BAFA;AAGA;AAHA,SADA,CALA;AAYAC,sCAZA,CAaA;;AAbA;AAhBA;AAgCA,GAnCA;AAoCAC,SApCA,qBAoCA;AACA;AACA;AAGA;AACA;AACA;AACAC;AAEA,GA9CA;AA+CAC;AACAC,QADA,kBACA;AACA;AACAC,8BADA;AAEAC;AACArB,uBADA;AAEAD;AAFA;AAFA;AAOA,KATA;AAUAuB,SAVA,iBAUAC,YAVA,EAUA;AACA;AACA,kDAFA,CAGA;;AACA;AACAC;AACA,sCACA;AACA;AACA,KAnBA;AAoBAC,QApBA,kBAoBA;AAAA;;AACA;AACAC,mEADA;AAEAC;AAFA,SAGAC,IAHA,CAGA;AAAA;AACA;;AAEA;AACAF,uEADA;AAEAC;AAFA,WAGAC,IAHA,CAGA;AAAA;AACA;AACAX;;AACA;AACA;AAAAZ;AAAAC;AAAAuB;AAAArB;AAAA;AACA;AAAAsB;AAAAC;AAAAzB;AAAAuB;AAAA;;AACA;;AACA;AACA;;AACA;AACA,SAbA;AAcA,OApBA;AAqBA,KA1CA;AA2CAG,kBA3CA,0BA2CAX,KA3CA,EA2CA;AACAJ,wCADA,CAEA;;AACA,+FACA;AACA,OAFA;AAGA,KAjDA;AAkDAgB,eAlDA,uBAkDAC,UAlDA,EAkDAC,MAlDA,EAkDA;AACA;AACA;AACA;;AACA;AACA;AACA,OAFA;AAGA,oEAPA,CAQA;AACA;;AACA;AACAf,8BADA;AAEAC;AACArB,uBADA;AAEAD,uBAFA;AAGAqC;AAHA;AAFA;AAQA,KApEA;AAqEAC,eArEA,uBAqEAC,UArEA,EAqEAH,MArEA,EAqEA;AACAlB;AACA;AAvEA;AA/CA","names":["components","RelationGraph","data","uid","mid","fid","reports","graph_json_data","rootId","nodes","id","text","borderColor","fontColor","links","graphOptions","defaultNodeBorderWidth","allowSwitchLineShape","allowSwitchJunctionPoint","defaultLineShape","defaultJunctionPoint","mounted","console","methods","back","path","query","sleep","numberMillis","now","init","url","method","then","color","from","to","showSeeksGraph","onNodeClick","nodeObject","$event","similarFid","onLineClick","lineObject"],"sourceRoot":"src/views/modules/report","sources":["similarView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"background-color: white\">\r\n      <el-button style=\"margin-left: 3em\" @click=\"back()\">\r\n        返回\r\n      </el-button>\r\n    </div>\r\n    <div style=\"height:calc(100vh - 50px);\">\r\n      <RelationGraph ref=\"seeksRelationGraph\" :options=\"graphOptions\" :on-node-click=\"onNodeClick\" :on-line-click=\"onLineClick\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RelationGraph from 'relation-graph'\r\nexport default {\r\n  components: { RelationGraph },\r\n  data() {\r\n    return {\r\n      uid:'',\r\n      mid:'',\r\n      fid:'',\r\n\r\n      reports:[],\r\n\r\n\r\n      graph_json_data: {\r\n        rootId: '0',\r\n        nodes: [\r\n          { id: '0', text: '', borderColor: 'yellow', fontColor: 'white'},\r\n        ],\r\n        links: [\r\n        ]\r\n      },\r\n      graphOptions: {\r\n        defaultNodeBorderWidth: 0,\r\n        allowSwitchLineShape: true,\r\n        allowSwitchJunctionPoint: true,\r\n        defaultLineShape: 1,\r\n        'layouts': [\r\n          {\r\n            'label': '自动布局',\r\n            'layoutName': 'force',\r\n            'layoutClassName': 'seeks-layout-force'\r\n          }\r\n        ],\r\n        defaultJunctionPoint: 'border'\r\n        // 这里可以参考\"Graph 图谱\"中的参数进行设置\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    //二级的报告详情解决\r\n    this.$storage.set(\"whichToReportDetail\", \"reportList\")\r\n\r\n\r\n    this.mid=this.$route.query.mid\r\n    this.fid=this.$route.query.fid\r\n    this.init()\r\n    console.log(this.title)\r\n\r\n  },\r\n  methods: {\r\n    back(){\r\n      this.$router.push({\r\n        path:'/report/detail',\r\n        query:{\r\n          fid:this.fid,\r\n          mid:this.mid,\r\n        }\r\n      })\r\n    },\r\n    sleep(numberMillis) {\r\n      var now = new Date();\r\n      var exitTime = now.getTime() + numberMillis;\r\n      // eslint-disable-next-line no-constant-condition\r\n      while (true) {\r\n        now = new Date();\r\n        if (now.getTime() > exitTime)\r\n          return;\r\n      }\r\n    },\r\n    init(){\r\n      this.$http({\r\n        url: `fetchmission/searchreportbyfid?fid=${this.fid}`,\r\n        method: \"get\"\r\n      }).then(({data}) => {\r\n        this.graph_json_data.nodes[0].text=data.fetchmission.title\r\n\r\n        this.$http({\r\n          url: `fetchmission/getsimilaritygraph?fid=${this.fid}`,\r\n          method: \"get\"\r\n        }).then(({data}) => {\r\n          this.reports=data\r\n          console.log(this.reports)\r\n          for(let i=0;i<this.reports.length;i++){\r\n            let node={id: this.reports[i].fid.toString(), text: this.reports[i].title, color: '#43a2f1', fontColor: 'yellow' }\r\n            let link={from: this.reports[i].fid.toString(), to: '0', text: Number(this.reports[i].similarity*100).toFixed()+\"%\", color: '#43a2f1'}\r\n            this.graph_json_data.nodes.push(node)\r\n            this.graph_json_data.links.push(link)\r\n          }\r\n          this.showSeeksGraph()\r\n        });\r\n      });\r\n    },\r\n    showSeeksGraph(query) {\r\n      console.log(this.graph_json_data)\r\n      // 以上数据中的node和link可以参考\"Node节点\"和\"Link关系\"中的参数进行配置\r\n      this.$refs.seeksRelationGraph.setJsonData(this.graph_json_data, (seeksRGGraph) => {\r\n        // Called when the relation-graph is completed\r\n      })\r\n    },\r\n    onNodeClick(nodeObject, $event) {\r\n      if(nodeObject.id==='0'){\r\n        return\r\n      }\r\n      let report=this.reports.filter(function (item) {\r\n        return item.fid.toString() === nodeObject.id\r\n      })\r\n      this.$storage.set(\"whichToReportDetail\", \"similarReportView\");\r\n      // console.log('onNodeClick:', nodeObject.id)\r\n      // console.log(report)\r\n      this.$router.push({\r\n        path:'/report/detail',\r\n        query:{\r\n          fid:this.fid,\r\n          mid:this.mid,\r\n          similarFid:nodeObject.id\r\n        }\r\n      })\r\n    },\r\n    onLineClick(lineObject, $event) {\r\n      console.log('onLineClick:', lineObject.id)\r\n    }\r\n  }\r\n}\r\n</script>"]}]}