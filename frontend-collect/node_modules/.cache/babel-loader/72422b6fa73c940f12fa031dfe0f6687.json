{"remainingRequest":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\center.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\src\\views\\center.vue","mtime":1648202568374},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\babel.config.js","mtime":1648202514567},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\picturesque\\Desktop\\frontend-collect\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g5ZCE56eN5qCh6aqM5pa55rOVCmltcG9ydCB7IGlzRW1haWwsIGlzTW9iaWxlIH0gZnJvbSAiQC91dGlscy92YWxpZGF0ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBuaWNrbmFtZTogIiIsCiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBob25lTnVtYmVyOiAiIiwKICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgY29tcGFueU5hbWU6ICIiCiAgICAgIH0sCiAgICAgIHVzZXJUeXBlOiAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgdXNlclR5cGUgPSB0aGlzLiRzdG9yYWdlLmdldCgidXNlclR5cGUiKTsKICAgIHRoaXMudXNlclR5cGUgPSB1c2VyVHlwZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uSGFuZGxlcjogZnVuY3Rpb24gb25IYW5kbGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnJ1bGVGb3JtLm5pY2tuYW1lKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pi156ew5LiN6IO95Li656m6Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucnVsZUZvcm0udXNlcm5hbWUpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnlKjmiLflkI3kuI3og73kuLrnqbonKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5ydWxlRm9ybS5waG9uZU51bWJlciB8fCAhaXNNb2JpbGUodGhpcy5ydWxlRm9ybS5waG9uZU51bWJlcikpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTYyNEJcdTY3M0FcdTUzRjdcdTY4M0NcdTVGMEZcdTRFMERcdTZCNjNcdTc4NkUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5ydWxlRm9ybS5lbWFpbCB8fCAhaXNFbWFpbCh0aGlzLnJ1bGVGb3JtLmVtYWlsKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIlx1OTBBRVx1N0JCMVx1NjgzQ1x1NUYwRlx1NEUwRFx1NkI2M1x1Nzg2RSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXNlclR5cGUgPT0gImVtcGxveWVyIiAmJiAhdGhpcy5ydWxlRm9ybS5jb21wYW55TmFtZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIlx1NEYwMVx1NEUxQVx1NTQwRFx1NzlGMFx1NEUwRFx1ODBGRFx1NEUzQVx1N0E3QSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2codGhpcy5ydWxlRm9ybSk7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogIi91c2VyL3VwZGF0ZXVzZXI/dWlkPSIuY29uY2F0KHRoaXMuJHN0b3JhZ2UuZ2V0KCJ1aWQiKSksCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgZGF0YTogdGhpcy5ydWxlRm9ybQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CgogICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55L+h5oGv5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHt9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AAEA;AACAA,MADA,kBACA;AACA;AACAC;AACAC,oBADA;AAEAC,oBAFA;AAGAC,uBAHA;AAIAC,iBAJA;AAKAC;AALA,OADA;AAQAC;AARA;AAUA,GAZA;AAaAC,SAbA,qBAaA;AACA;AACA;AACA,GAhBA;AAiBAC;AACAC,aADA,uBACA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACAC;AACA;AACAC,qEADA;AAEAC,sBAFA;AAGAb;AAHA,SAIAc,IAJA,CAIA;AAAA;;AACA;AACA;AACAC,6BADA;AAEAC,2BAFA;AAGAC,0BAHA;AAIAC,yCACA;AALA;AAOA,SARA,MAQA;AACA;AACA;AACA,OAhBA;AAiBA;AAxCA;AAjBA","names":["data","ruleForm","nickname","username","phoneNumber","email","companyName","userType","mounted","methods","onHandler","console","url","method","then","message","type","duration","onClose"],"sourceRoot":"src/views","sources":["center.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-form\r\n                class=\"detail-form-content\"\r\n                ref=\"ruleForm\"\r\n                :model=\"ruleForm\"\r\n                label-width=\"80px\"\r\n        >\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"昵称\" prop=\"nickname\">\r\n                    <el-input v-model=\"ruleForm.nickname\"\r\n                              placeholder=\"昵称\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input v-model=\"ruleForm.username\"\r\n                              placeholder=\"用户名\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"手机号\" prop=\"phoneNumber\">\r\n                    <el-input v-model=\"ruleForm.phoneNumber\"\r\n                              placeholder=\"手机号\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input v-model=\"ruleForm.email\"\r\n                              placeholder=\"邮箱\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n                <el-form-item v-if=\"userType=='employer'\" label=\"企业名称\" prop=\"companyName\">\r\n                    <el-input v-model=\"ruleForm.companyName\"\r\n                              placeholder=\"企业名称\" clearable></el-input>\r\n                </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"24\">\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"onHandler\">修 改</el-button>\r\n                </el-form-item>\r\n            </el-col>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\n    // 各种校验方法\r\n    import {isEmail, isMobile} from \"@/utils/validate\";\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                ruleForm: {\r\n                  nickname:\"\",\r\n                  username:\"\",\r\n                  phoneNumber:\"\",\r\n                  email:\"\",\r\n                  companyName:\"\"\r\n                },\r\n                userType:\"\"\r\n            };\r\n        },\r\n        mounted() {\r\n            var userType = this.$storage.get(\"userType\");\r\n            this.userType = userType;\r\n        },\r\n        methods: {\r\n            onHandler() {\r\n                if (!this.ruleForm.nickname) {\r\n                    this.$message.error('昵称不能为空');\r\n                    return\r\n                }\r\n                if (!this.ruleForm.username) {\r\n                    this.$message.error('用户名不能为空');\r\n                    return\r\n                }\r\n                if ((!this.ruleForm.phoneNumber) || (!isMobile(this.ruleForm.phoneNumber))) {\r\n                    this.$message.error(`手机号格式不正确`);\r\n                    return\r\n                }\r\n                if ((!this.ruleForm.email) || (!isEmail(this.ruleForm.email))) {\r\n                    this.$message.error(`邮箱格式不正确`);\r\n                    return\r\n                }\r\n                if ((this.userType==\"employer\")&&!this.ruleForm.companyName){\r\n                  this.$message.error(`企业名称不能为空`)\r\n                  return;\r\n                }\r\n                console.log(this.ruleForm);\r\n                this.$http({\r\n                    url: `/user/updateuser?uid=${this.$storage.get(\"uid\")}`,\r\n                    method: \"post\",\r\n                    data: this.ruleForm\r\n                }).then(({data}) => {\r\n                    if (data && data.code === 0) {\r\n                        this.$message({\r\n                            message: \"修改信息成功\",\r\n                            type: \"success\",\r\n                            duration: 1500,\r\n                            onClose: () => {\r\n                            }\r\n                        });\r\n                    } else {\r\n                        this.$message.error(data.msg);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"]}]}